ktor {
    deployment {
        port = 8080
        port = ${?PORT}
    }
    application {
        modules = [ dev.waylon.terminal.ApplicationKt.module ]
    }
}

terminal {
    # Default shell type - bash is the most common in Linux environments
    defaultShellType = "powershell"
    
    # Default terminal size
    defaultSize {
        columns = 80
        rows = 24
    }
    
    # Default working directory configuration - uses user home directory, supports environment variables
    defaultWorkingDirectory = "."

    # Session timeout (milliseconds)
    sessionTimeout = 1800000 # 30 minutes
    
    # Shell type configuration - most common shells in Linux environments
    shells {
        # 1. Bash - default Linux shell, most commonly used
        bash {
            # Use direct path in real Linux environments
            # command = ["/bin/bash", "-l"]
            # Run Linux bash via WSL in Windows environments
            command = ["wsl.exe", "-e", "bash", "-l"]
            # Optional: shell-level working directory, uses defaultWorkingDirectory if not configured
            # workingDirectory = "/home/longwang"  # Home directory in real Linux environments
            # workingDirectory = "/mnt/d/Users/long.wang" # Home directory via WSL in Windows environments
            # Optional: shell-level terminal size, uses defaultSize if not configured
            # size {
            #     columns = 100
            #     rows = 30
            # }
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 2. Sh - standard shell, usually a link to bash or dash
        sh {
            # Use direct path in real Linux environments
            command = ["/bin/sh"]
            # Run Linux sh via WSL in Windows environments
            # command = ["wsl.exe", "-e", "sh"]
            # Optional: shell-level working directory, uses defaultWorkingDirectory if not configured
            # workingDirectory = "/home/user"  # Home directory in real Linux environments
            # Optional: shell-level terminal size, uses defaultSize if not configured
            # size {
            #     columns = 80
            #     rows = 24
            # }
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 3. Zsh - feature-rich shell, many developers' choice
        zsh {
            # Use direct path in real Linux environments
            command = ["/bin/zsh", "-l"]
            # Run Linux zsh via WSL in Windows environments
            # command = ["wsl.exe", "-e", "zsh", "-l"]
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 4. Fish - user-friendly shell with auto-completion features
        fish {
            # Use direct path in real Linux environments
            command = ["/usr/bin/fish"]
            # Run Linux fish via WSL in Windows environments
            # command = ["wsl.exe", "-e", "fish"]
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # 5. Tcsh - C shell variant, still used in some systems
        tcsh {
            # Use direct path in real Linux environments
            command = ["/bin/tcsh", "-l"]
            # Run Linux tcsh via WSL in Windows environments
            # command = ["wsl.exe", "-e", "tcsh", "-l"]
            environment {
                TERM = "xterm-256color"
                PATH = "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            }
        }
        
        # Windows-specific shells - can be commented out in pure Linux environments
        # cmd {
        #     command = ["cmd.exe"]
        #     workingDirectory = "D:\\Users\\long.wang"
        #     environment {
        #         TERM = "xterm-256color"
        #     }
        # }
        powershell {
             command = ["powershell.exe"]
             workingDirectory = "D:\\Users\\long.wang"
             environment {
                 TERM = "xterm-256color"
             }
         }
    }
}